---
index: 2
icon: creative
title: 데이터 타입
category:
  - JavaScript
editLink: false
---

::: tip GOAL
Q. 자바스크립트의 데이터 타입 두 가지는?  
Q. 메모리 저장 관점에서 두가지 타입을 구분하는 차이는?
:::
해당페이지는 2022년 3월 노션에서 마이그레이션 되었습니다.  


## 자바스크립트의 데이터 타입
자바스크립트의 데이터 타입에는 두가지가 있다
- Primitive Type(기본형) : Number, Stringm Boolen, null. undefined, Symbol
- Reference Type(참조형) : Object -> Array, Function, RegExp, Set/WeakSet, Map/WeakMap


## 기본형이 실제 메모리에 변수 값이 저장되는 과정

```js
var a;
a = "abc";
```

위와 같이 변수 a에 'abc'의 값이 할당되는 과정을 살펴보면

1. 먼저 임의의 주소에 문자열을 저장 후
   | 주소 | 5004 | 5005 |... |
   | ------ | ---- | ----- |---- |
   | 데이터 | ... | 'abc' |... |

2. 변수 a 가 저장되어 있는공간에 변수 'abc'가 저장되어 있는 주소를 저장한다.
   | 주소 | 1002 | 1003|... |
   | ---- | ---- | ---- |---- |
   | 데이터 | ...| 이름: a 값 :@5005|... |

## 참조형이 실제 메모리에 변수 값이 저장되는 과정

```js
var obj = {
  a: 1,
  b: "bbb",
};

//참고. 컴퓨터가 읽을 때는 아래와 같이 선언이 먼저 그 다음 할당
var obj;
obj = {
  a: 1,
  b: "bbb",
};
```

1. 선언, 비어있는 주소 공간의 이름을 obj 라 한다.
2. 할당, 값을 먼저 집어 넣는다. 객체 안에 프로퍼티가 있고 안에 각각의 값이 필요하니 하나에 넣을 수 없다.
   @주소를 많이 할당을 해놓는다. 해당 주소는 모두 이 객체의 프로퍼티라 지정한다.(@7103~)
3. 해당 주소범위에 기본형 방식과 같이 임의의 주소에 값과 주소를 따로 저장해준다. 즉 객체안에 있는 프로퍼티에 값을 할당한다.

| 주소   | 1002 | 1003                | ... |
| ------ | ---- | ------------------- | --- |
| 데이터 | ...  | 이름: obj 값 :@5002 | ... |

| 주소   | 5001 | 5002    | 5003 | 5004  | ... |
| ------ | ---- | ------- | ---- | ----- | --- |
| 데이터 | ...  | @7103~? | 1    | 'bbb' | ... |

| 주소   | 7103                | 7104             | ... |
| ------ | ------------------- | ---------------- | --- |
| 데이터 | 이름 : a 값 : @5003 | 이름:b 값: @5004 | ... |

만약 프로퍼티 안에 배열이 있을경우에도 위와 같은 방식으로 된다.

기본형은 주소 한번만 할당하면 됐는데 참조형은 할당하기전에 한단계를 더 거친다.  
기본형은 바로 값이 변하는 반면에 객체 있는 프로퍼티 값 바뀔때 해당 obj의 값의 주소가 변하지 않는다.

### 프로퍼티 값 변경시 순서

1. 먼저 해당 값을 저장하고
2. 해당 obj의 이름을 가진 주소를 찾고
3. 해당 값이 있는 주소로 가서 구역을 찾고
4. 찾은 구역안에 해당 프로퍼티의 이름에서 값의 주소를 바꾼다.

만약 오브젝트의 값이 바뀌면서 참조하는 대상이 0개 일때 (참조 카운트가 0 일때) 그런 메모리는 가비지 컬렉터의 수집대상이 되어서 사라지게 된다.
이때 수집대상이 구역일 경우 연계하던 데이터들도 같이 가비지 컬렉팅 대상이 돼서 수거가 된다.

## 왜 이렇게 주소값으로 저장할까?

만약 변수에 들어 갈 값이 매우 큰 용량을 차지하는 문자열이라면

비교를 위한 비용이 크다. `x === y' 동일 문자열 비교시 성능 저하가 발생한다. 그러나 만약 주소 값으로 저장시에는
처음 할당하는데는 시간이 좀 더 걸리지만, 한 번 동일성이 판단되면 다시 비용들진 않는다. 또한
메모리도 덜 차지한다 같은 문자열 30개 직접 저장시 30 \* x byte 필요 , 주소저장시 30 + x byte 필요하다

**값을 직접 저장**

- 데이터 할당시에는 빠름
- 비교에 비용이 많이 듦
- 메모리 낭비가 심함

**값의 주소를 저장**

- 데이터 할당시에는 느림
- 비교에 비용이 들지 않음
- 메모리 낭비 최소화

같은 값은 메모리 안에 오직 하나만 존재한다 즉 불변 값이다 => 기본형 데이터가 불변 값이라 하는 이유

## 변수 복사
그렇다면 기본형과 참조형데이터의 변수복사시에는 어떤일이 일어날까?


1. 기본형 데이터 와 참조형 데이터 둘 다 가르키고 있는 값의 주소를 복사한다

```
var a = 10
var b = a
var obj1 = { c: 10,d: 'dd'}
var obj2 = obj1
```

2. 그 후 값을 바꿨을 때

```
b= 15;
obj2.c =20
```

3. 기본형 값을 바꾼 경우 `b`의 주소 값은 바뀌지만
참조형 값의 프로퍼티를 바꾼 경우 `obj2`는 여전히 같은 주소를 바라보고 있다. 


* 이런 현상은 실제 개발할 때 문제로서 마주치기 쉬운 현상이다.  
 ex) 객체 복사 후 복사한 값의 프로퍼티를 바꿨는데 처음 값이 바뀌는 경우,
리액트나 뷰에서 객체의 값을 바꿔도 재랜더링이 안일어나는 경우 등
