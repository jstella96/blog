---
index: 2
icon: creative
title: ARP프로토콜
category:
  - Network
tag:
  - 네트워크
editLink: false
---

:::tip
Q. IPv4가 하는 일과 IPv4 프로토콜의 구조
Q. ICMP가 하는 일과 ICMP 프로토콜의 구조
Q. 내가 보낸 패킷은 어디로 가는가?
Q. 다른 네트워크까지 내 패킷의 이동과정
Q. 조각화란? 조각화하는 과정
:::

## IPv4 프로토콜

- IPv4가 하는 일
  네트워크 상에서 데이터를 교환하기 위한 프로토콜
  **데이터가 정확하게 전달된느 것을 보장하지 않는다.**
  중복된 패킷을 전달하거나 패킷의 순서를 잘못 전달할 가능성도 있다.
  (악의적으로 이용시 DOS공격이 됨)
  데이터의 정확하고 순차적인 전달은 그보다 상위 프로토콜인 TCP에서 보장한다.
  데이터가 누락될 수 도 있다. 다른계층(4계층)에서 보장을 해준다. 신뢰성 있는 통신은 4계층..
  단지 멀리 보내는 역할만!
- IPv4 프로토콜 구조

!()[]
Version : IP프로토콜의 버전 무조건 4가 온다. (4Bite?? 0.5Byte) . IPv6은 구조 자체가 다르다 6쓴다고 6아님
IHL(IP Header Length): 해더 가능 범위 20~60 해더길이 20인데? 4비트 최대 15까지 밖에 표현 못함 /4를 해서 표현한다 20-60/ 4 -=> 5-15 로 옵션하나 붙을 때마다 1씩 늘어나는것. 일반적으로는 옵션 안붙으니까 5 가온다
(4Bite?? 0.5Byte)
Type Of Service(TOS): 옛날에 쓰이던 것 0으로 채운다. (1Byte)
Total Length: 헤더 길이 뿐아니라 뒤에 페이로드 까지 합친 전체길이.(2Byte)
Identification : Identification,IP Flags ,Fragment Offset은 하나의 세트라고 보자.
데이터가 큰 걸 보낼 때 잘게 쪼개서 보내야 할때 사용하는 값 쪼개진 값들 알아 볼수 있게.
하나의 데이터가 쪼개 졌을 때 원래 데이터를 알아 볼 수있게 똑같이 주는 ID값. 다시 합칠때쓴다.(2Byte)
IP Flags : 3비트! [x D M] 첫번째는 안쓰고 두번째는 Done Fragmentain More Fragm..?
두번째는 패킷 보내는 사람이 데이터를 안쪼개서 보내겠다
만약 최대 100MB인데 내가 700보낼꺼야 근데 안쪼갤꺼야!!! -> 근데 안보내짐
`ping xxx.xxx.xx -I 7000 -f` 해보면 손실 100%남 최대가 1500이라 즉 잘 안쓴다.
결국 쓰는건 M 조각화가 일어났는데 나말고 다른 패킷 더 있다. 알려주는거 최대 데이터 보다 큰거 전송하면 셋팅 된다
최대보다 큰거 보내면 1 작은거 보내면 0으로 셋팅

Fragment Offset: 13비트 쪼갠데이터 원래순서 있는데 받을 때는 순서 섞일수 있다. 받는 순서대로 조립하면 안됨
IT 에서 offset은 원래 기준으로 부터 얼마만큼 떨어져있다. 여기서는 시작부분부터 얼마만큼 떨어져있다.
첫번째는 0 두번째는 첫번째 크기만큼 세번째는 첫번째 두번쨰 합친 크기 만큼.
Time To Live(TTL): 패킷이 살아있을 수 있는 시간.
Protocol:
Header Checksum:
Source Address : 출발지 IP 주소
Destination Address : 목적지 IP 주소

20Byte
마지막 옵션은 붙을 수도 안붙을 수도 있어서 뺀다. 붙으면 4바이트씩 추가 된다. 10개까지 가능

## ICMP 프로토콜

## 라우팅테이블

## 다른네트워크와 통신과정

## IPv4의 조각화
