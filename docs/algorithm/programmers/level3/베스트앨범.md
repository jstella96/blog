---
index: 1
icon: creative
title: 베스트앨범
category:
  - algorithm
tag:
  - Hash
  - Heap
---

[문제 링크](https://programmers.co.kr/learn/courses/30/lessons/42579)

## 문제 설명

스트리밍 사이트에서 장르 별로 가장 많이 재생된 노래를 두 개씩 모아 베스트 앨범을 출시하려 합니다. 노래는 고유 번호로 구분하며, 노래를 수록하는 기준은 다음과 같습니다.

1. 속한 노래가 많이 재생된 장르를 먼저 수록합니다.
2. 장르 내에서 많이 재생된 노래를 먼저 수록합니다.
3. 장르 내에서 재생 횟수가 같은 노래 중에서는 고유 번호가 낮은 노래를 먼저 수록합니다.

노래의 장르를 나타내는 문자열 배열 genres와 노래별 재생 횟수를 나타내는 정수 배열 plays가 주어질 때, 베스트 앨범에 들어갈 노래의 고유 번호를 순서대로 return 하도록 solution 함수를 완성하세요.

## 입출력 예시

```
Input:
  genres = ["classic", "pop", "classic", "classic", "pop"]
	plays =  [500, 600, 150, 800, 2500]
Output: [4, 1, 3, 0]
```

## 문제 풀이

map을 두개 만든다. 하나는 각 장르별 카운트를 세는 map,
다른 하나는 각 장르별 곡을 담아놓은 PriorityQueue를 값으로 가지는 map,
PriorityQueue 의 정렬 기준을 각 곡의 재생 횟수 되도록 한후
장르별 카운트를 세는 map 또 한 총 재생횟수를 정렬 기준이 되도록한다.
위의 값들을 나열하면 구하고자 하는 값들의 순서가 나온다.

## 풀이코드

```java
//고유번호 신경써 주어야함.
import java.util.*;

class Solution {

    public int[] solution(String[] genres, int[] plays) {

        HashMap<String, Integer> cntMap = new HashMap<>();
        HashMap<String, PriorityQueue > musicMap = new HashMap<>();

        for(int i = 0 ; i < plays.length ; i++  ){
            cntMap.put( genres[i] , cntMap.getOrDefault( genres[i] ,0) + plays[i] );
            if(!musicMap.containsKey(genres[i])){
                PriorityQueue<int[]> pq = new PriorityQueue<>((o1, o2) ->  o2[1] - o1[1] ); //내림차순
                musicMap.put(genres[i],pq);
            }
            int[] arr = new int[] {i,plays[i]};
            musicMap.get(genres[i]).add(arr);
        };

         //**코드 단축! 좋은 방법인듯!
         List<String> sortList = new ArrayList<>(cntMap.keySet());
	 	    Collections.sort(sortList, (o1, o2) ->  cntMap.get(o2) - cntMap.get(o1));


        List<Integer> answerList = new ArrayList<>();
        for(String str : sortList ){
            int count  = 0;
            PriorityQueue<int[]> musicPq = musicMap.get(str);
            while(!musicPq.isEmpty() && count < 2){
                count++;
                int[] arr = musicPq.poll();
                answerList.add(arr[0]);
            }
        }

      int [] answer = new int[answerList.size()];
      for( int i =0;i<answerList.size();i++) {
        answer[i] = answerList.get(i);
      }
      return answer;
    }
}
```

## 풀이 코드 JavaScript 
```js

// map의 구조 
// key : genre 
// value : { totalCount: Number , List: Array[music] }

function solution(genres, plays) {

    const map = new Map();
    const len = genres.length;
    for(let i = 0; i < len; i++ ){
        if(!map.has(genres[i])){
            map.set(genres[i],{ totalCount: 0, list:[]})
        }           
        map.get(genres[i]).totalCount += plays[i];
        map.get(genres[i]).list.push({'id':i,'count':plays[i]});
    }
    let genreInfo = map.values();
    genreInfo = Array.from(genreInfo)
    genreInfo.sort((a, b) =>  b.totalCount - a.totalCount );
    const answer =[];
    for(let item of genreInfo){
        let musicList = item.list;
        console.log(musicList)
        musicList.sort((a,b) => { 
            if( b.count == a.count) return a.id - b.id;
            else return  b.count - a.count;
        })
        
        let twoTriger = 0;
        for(let music of musicList){
            answer.push(music.id)
            twoTriger++;
            if(twoTriger == 2) break;
        }
    }
    return answer;
}
  
```