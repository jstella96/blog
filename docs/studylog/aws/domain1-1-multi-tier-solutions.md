---
order: 11
icon: creative
title: 1-1 멀티 티어 아키텍처 솔루션 설계
category: 
  - Aws
tag: 
  - SAA-C02 자격증
editLink: false
---


  
AWS-SAA 자격증 항목을 기준으로 AWS를 공부 합니다. 각 항목의 의미를 살펴보고 중점사항을 파악하는 것을 목표로 합니다.각 항목별 이론/실습으로 학습합니다.

::: details 상세 영역 ( 출처: aws certification 홈페이지 )

* 1.1 멀티 티어 아키텍처 솔루션 설계  👈👈👈👈👈 **지금 여기**
  * 액세스 패턴을 기반으로 솔루션 설계를 결정합니다.
  * 설계에 사용되는 구성 요소에 대한 조정 전략을 결정합니다.
  * 요구 사항에 따라 적절한 데이터베이스를 선택합니다.
  * 요구 사항에 따라 적절한 컴퓨팅 및 스토리지 서비스를 선택합니다.  

* 1.2 고가용성 및/또는 내결함성 아키텍처 설계
  * 가용 영역 전반에 내결함성 아키텍처를 제공하는 데 필요한 리소스의 양을 결정합니다.
  * 단일 장애 지점을 완화하는 고가용성 구성을 선택합니다. 
  *  애플리케이션을 변경할 수 없는 경우 레거시 애플리케이션의 안정성을 개선하는 AWS
  서비스를 적용합니다.
  * 비즈니스 요구 사항을 충족하는 데 적절한 재해 복구 전략을 선택합니다.
  * 솔루션의 고가용성을 보장하는 주요 성능 지표를 식별합니다.  

* 1.3 AWS 서비스를 사용하여 결합 해제 메커니즘 설계
  * 구성 요소의 소결합을 달성하기 위해 활용할 수 있는 AWS 서비스를 결정합니다.
  * 결합 해제를 활성화하기 위해 서버리스 기술을 활용할 시기를 결정합니다.  

* 1.4 적절한 복원력을 갖춘 스토리지 선택
  * 데이터의 내구성을 보장하는 전략을 정의합니다.
  * 데이터 서비스 일관성이 애플리케이션 운영에 미치는 영향을 파악합니다.
  * 애플리케이션의 액세스 요구 사항을 충족하는 데이터 서비스를 선택합니다.
  * 하이브리드 또는 비클라우드 네이티브 애플리케이션과 함께 사용할 수 있는 스토리지
서비스를 식별합니다

:::

## Domain 1 복원력을 갖춘 아키텍처 설계
## 멀티 티어 아키텍처 솔루션 설계
- **액세스 패턴을 기반으로 솔루션 설계를 결정합니다**

  - 이 항목은 누가, 무엇을 특정 아키텍처에 액세스해야 하는지, 어떻게 액세스할지에 대한 설계를 의미합니다.
  - 퍼블릭 웹 애플리케이션(인터넷을 통해 제공되는 액세스), 가상 사설망 또는 VPN을 통한 온프레미스, 사용자의 액세스 요청 등 어디서 오는 요청인지에 따라 아키텍쳐가 변경될 수 있습니다.
  - 액세스 패턴이 시간 및 날마다 어떻게 보이는지 고려해야 합니다. 고려해야 할 피크가 있습니까? 요청의 크기가 다양합니까? 아니면 상당히 일관성이 있습니까? 예상치 못한 대량의 트래픽에 대비해야 합니까?
  위와 같은 사항은 설계에 있어 중요한 고려사항 입니다.

- **설계에 사용되는 구성 요소에 대한 조정 전략을 결정합니다**

  - 트래픽이 패턴이 변화할 때 마다 확장이 필요할 때가 있습니다. 시스템 설계시 구성 요소에 대한 확장 전략을 어떻게 고려하고 결정해야 하는지에 대해 알고있어야 합니다.
  - 스케일링을 구현하는 방법, 다양한 서비스가 탄력성을 처리하는 방법, 스케일링 요구를 자동화하는 방법을 공부해야 합니다.
  - 또한 이러한 부분에서 서비스 제한 사항을 포함해야 합니다. 동시에 배포할 수 있는 인스턴스 또는 VPC의 수와 같은 제한을 둔다면 시스템 구성요소의 확장을 계속하는 기능을 빠르게 중지할 수 있습니다.

- **요구 사항에 따라 적절한 데이터베이스를 선택합니다**

  - Amazon Relational Database Service 또는 Amazon DynamoDB와 같은 관리형 서비스를 활용하는 것과    인스턴스에서 자체 데이터베이스를 구축하는 것의 차이를 알고있어야 합니다.
  - 주어지는 시나리오에 따라 적절한 데이터베이스를 선택할 수 있도록 각 데이터베이스의 특징들을 알고 있어야 합니다.

- **요구 사항에 따라 적절한 컴퓨팅 및 스토리지 서비스를 선택합니다**
  - 다양한 인스턴스 패밀리가 실행할 서버와 배포 방법에 어떤 영향을 미치는지 알고 있어야 합니다.
  - 언제 Amazon Elastic Block Store보다 인스턴스 기반 스토리지를 선택해야 하는지 알고 있어야 합니다.
  - Amazon Simple Storage Service와 Amazon S3 Glacier 등의 차이를 알고 상황에 따라 적절하게 선택할 수 있어야 합니다.

## 키워드
::: tip 배치그룹
배치그룹(placement groups)이란?
EC2 서비스는 모든 인스턴스가 기본 하드웨어 전반에 분산되도록 하여 상호 관련 오류의 위험을 줄이는 방식을 취하고 있습니다. 그러나 워크로드 요구 사항을 충족하기 위해 배치 그룹을 사용하여 상호 의존적 인스턴스 그룹의 배치에 영향을 줄 수 있습니다.

- 클러스터 : 인스턴스를 가용 영역 안에 서로 근접하게 위치 시킵니다. 이 전략은 **HPC 애플리케이션**에서 필요로하는 **낮은 지연 시간**을 이점으로 가집니다.

- 파티션 : 인스턴스를 논리적으로 파티션에 분산해, 한 파티션에 있는 인스턴스 그룹이 다른 파티션의 인스턴스 그룹과 기본 하드웨어를 공유하지 않게 합니다. 이 전략은 일반적으로 Hadoop, Cassandra, Kafka 등 대규모의 분산 및 복제된 워크로드에 필요합니다.

- 분산(Spread) : 소규모의 인스턴스 그룹을 다른 기본 하드웨어로 분산하여 상호 관련 오류를 줄입니다.

[관련 AWS 문서링크](https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/placement-groups.html)
:::

::: tip S3 vs S3 Glacier

S3(Simple Storage Service) : AWS 에서 제공하는 99.99999999999%의 안정성을 가진 저장공간입니다.
* S3 Standard : 자주 엑세스 하는 데이터 보관
* S3 Standard-IA / S3 One Zone-IA : 자주 엑세스하지 않는 데이터 보관
* S3 Glacier : 분기별,연간 1회 정도로 자주 엑세스 되지 않는 데이터 보관, 가장 저렴하게 데이터 보관 가능. Instant Retrieval , Flexible Retrieval,  Deep Archive 로 나뉨

Glacier에서는 객체를 인출하는 데는 ms ~ 수 시간이 소요될 수 있지만, S3 버킷에서는 거의 즉각적으로 객체를 인출할 수 있습니다. Glacier는 저장된 데이터를 거의 인출하지 않고 저렴하게 사용할 수 있는 장기 보관용 스토리지입니다.

[관련 AWS 문서링크 : S3](https://docs.aws.amazon.com/AmazonS3/latest/userguide/Welcome.html)  
[관련 AWS 문서링크 : Glacier](https://aws.amazon.com/ko/s3/storage-classes/glacier/)

:::

::: tip EC2 탄력적 IP  
EC2에서 제공되는 기본 퍼블릭 IP는 일시적이고 재부팅하면 바뀔 수 있습니다. 
장기적인 배포를 위해서는 영구적인 탄력적 IP를 할당하는게 바람직합니다. 
:::
::: tip EC2 인스턴스 유형
  인스턴스 유형은 어떤 워크로드를 계획하고 있는지에 따라서 다양하게 선택이 가능합니다. 
  컴퓨토 성능, 메모리, 스토리지 용량등 필요에 따라 선택하면 됩니다.
  2022년6월 16일 기준 인스턴스 유형 패밀리는 아래와 같습니다.   
  * 범용: 각 기능을 균형있게 제공 간단한 웹서비스, 다양한 개발 등  
  * 컴퓨팅 최적화:대규모 요청을 받는 웹서버 혹은 고성능 머신러닝 등    
  * 메모리 최적화: 처리량이 많은 데이터 베이스, 데이터 분석, 캐싱 작업 등  
  * 가속화된 컴퓨팅: 고성능 범용 그래픽 처리장치 제공 3D 시각화 높은 부하의 워크로드   
  * 스토리지 최적화:  분산 파일 시스템, 규모 큰 데이터 처리 애플리켄이션 등   

  [관련 AWS 문서링크 : EC2인스턴스 유형](https://aws.amazon.com/ko/ec2/instance-types/)

:::
::: tip Elastic Block Store(EBS)

  * 확장 가능한 고성능 블록 스토리지 서비스로 EC2용으로 설계되었습니다.
  * 인스턴스 수명과 관계없이 영구적인 데이터 보관이 필요한 경우 사용합니다.
  * 무중단 용량 증가, 스냅샷, 데이터에 빠른 엑세스 등의 장점입니다.
  - 4가지 유형이 있습니다. 
    * 범용 SSD 볼륨: 다양한 트랜잭션 워크로드를 위한 가격과 성능의 균형을 유지합니다. 이러한 볼륨은 부트 볼륨, 중간 규모의 단일 인스턴스 데이터베이스, 개발 및 테스트 환경과 같은 사용 사례에 적합합니다.

    * 프로비저닝된 IOPS SSD 볼륨(io1 및 io2)은 스토리지 성능과 일관성에 민감한 I/O 집약적 워크로드의 요구 사항을 충족하도록 설계되었습니다. 이러한 옵션은 볼륨을 생성할 때 지정하는 일관된 IOPS 속도를 제공합니다. 따라서 예측 가능한 방식으로 인스턴스당 수만 IOPS까지 확장할 수 있습니다.

    * 처리량 최적화 HDD 볼륨 : 저비용 마그네틱 스토리지를 제공합니다. 이러한 볼륨은 데이터 웨어하우스, 로그 처리 같은 대용량 순차 워크로드에 적합합니다.

    * 콜드 HDD 볼륨: 저비용 마그네틱 스토리지를 제공합니다. 이 볼륨은 순차적인 대용량 콜드 데이터 워크로드에 적합합니다. 데이터에 자주 액세스할 필요가 없고 비용을 절약해야 한다면 저렴한 블록 스토리지로 이러한 볼륨이 적합합니다.


[관련 AWS 문서링크 : EBS](https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/AmazonEBS.html)

:::


## Question

  회사는 여러 Amazon EC2 Linux 인스턴스를 사용하여 애플리케이션을 설계하고 있습니다.
  고성능 컴퓨팅 애플리케이션(HPC)에는 인스턴스 간의 짧은 지연 시간과 고성능 네트워크 통신이 필요합니다
  인스턴스 간에 가장 짧은 지연 시간을 제공하는 솔루션은 무엇입니까?

  A. Launch the EC2 instances in a cluster placement group  
      - 클러스터 배치 그룹에서 EC2 인스턴스 시작  
  B. Launch the EC2 instances in a spread placement group  
      - 분산형 배치 그룹에서 EC2 인스턴스를 시작  
  C. Launch the EC2 instances in an Auto Scaling group spanning multiple Regions  
      - 여러 리전에 걸쳐 있는 Auto Scaling 그룹에서 EC2 인스턴스를 시작  
  D. Launch the EC2 instances in an Auto Scaling group spanning multiple Availability Zones within a Region  
      - 한 리전 내의 여러 가용 영역에 걸쳐 있는 Auto Scaling 그룹에서 EC2 인스턴스를 시작  

---

* 문제 분석  
  1) HPC 환경에서 사용합니다. 
  2) 지연 시간이 가장 짧아야 합니다. 

* 정답 A  
  * 클라스터 배치 그룹은 네트워크의 짧은 지연시간을 위해 물리적으로 서로 가까이 있는 인스턴스를 시작하도록 특별히 설계되었습니다.

* 오답 이유   
  * B. 분산형 스타일 배치 그룹은 지연 시간을 줄이지 않고 가용성을 위해 설계되었기 때문에 A와 비교했을 때 A보다 낫지 않습니다.  
  * C. 응답 C는 불가능합니다. Auto Scaling 그룹은 여러 가용 영역에 걸쳐 있을 수 있지만 여러 리전에 걸쳐 있을 수는 없습니다.  
  * D. Auto Scaling을 이용해 단일 리전 내에 가용 영역에 걸쳐 유지하는 것은 응답 A보다 지연시간이 낫지 않습니다. 응답 A는 한 가용영역안에서 이루어집니다.

위 문제는 배치그룹(placement groups) 에 대해 알고 있었다면 쉽게 답을 도출해 낼 수 있는 문제였습니다🙌 


## Reference

[coursera강의](https://www.coursera.org/learn/aws-certified-solutions-architect-associate)  
[aws FAQ](https://aws.amazon.com/ko/faqs/)